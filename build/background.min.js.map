{"version":3,"sources":["webpack:///nowa-recore-solution/webpack/bootstrap","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/arrayLikeToArray.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/classCallCheck.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/createClass.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/defineProperty.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/iterableToArray.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/nonIterableSpread.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/toConsumableArray.js","webpack:///xswitch/node_modules/_@babel_runtime@7.20.0@@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///xswitch/forward.ts","webpack:///xswitch/background.ts","webpack:///xswitch/strip-json-comments.ts","webpack:///xswitch/utils.ts","webpack:///xswitch/chrome-storage.ts","webpack:///xswitch/constants.ts","webpack:///xswitch/enums.ts"],"names":["matchUrl","url","reg","REG","FORWARD","test","r","RegExp","replace","matched","UrlType","indexOf","STRING","Forward","Enabled","YES","Map","Array","_urls","_disabled","newValue","_config","details","cors","corsMap","config","corsMatched","length","forEach","rule","disabled","NO","originUrl","resHeaders","CORSOrigin","_originRequest","get","requestId","initiator","DEFAULT_CORS_ORIGIN","responseHeaders","filter","hasCredentials","tempOrigin","EMPTY_STRING","responseHeader","CORS","ORIGIN","name","toLowerCase","value","CREDENTIALS","METHODS","HEADERS","NULL_STRING","push","DEFAULT_CORS_CREDENTIALS","DEFAULT_CORS_METHODS","CORSHeader","_originRequestHeaders","DEFAULT_CREDENTIALS_RESPONSE_HEADERS","rules","proxy","redirectUrl","CHROME_EXTENSION","shift","i","_lastRequestId","split","join","e","console","error","headers","requestHeaders","requestName","set","ACCESS_CONTROL_REQUEST_HEADERS","X_HEADER","redirectToMatchingRule","window","_forward","csmInstance","ChromeStorageManager","useChromeStorageSyncFn","USE_CHROME_STORAGE_SYNC_FN","clearRunning","clearCacheEnabled","corsEnabled","parseError","jsonActiveKeys","conf","PROXY_STORAGE_KEY","CORS_STORAGE","JSON_CONFIG","ACTIVE_KEYS","result","getActiveConfig","forward","activeKeys","json","key","DISABLED","CLEAR_CACHE_ENABLED","CORS_ENABLED_STORAGE_KEY","setIcon","chrome","storage","onChanged","addListener","changes","checkAndChangeIcons","webRequest","onBeforeRequest","clearCache","onBeforeRequestCallback","urls","ALL_URLS","BLOCKING","onHeadersReceived","headersReceivedListener","RESPONSE_HEADERS","onBeforeSendHeaders","onBeforeSendHeadersCallback","REQUEST_HEADERS","setBadgeAndBackgroundColor","text","color","browserAction","setBadgeText","setBadgeBackgroundColor","BadgeText","ERROR","IconBackgroundColor","ON","OFF","onHeadersReceivedCallback","millisecondsPerWeek","MILLISECONDS_PER_WEEK","oneWeekAgo","Date","getTime","browsingData","removeCache","since","isDarkMode","matchMedia","DARK_MODE_MEDIA","matches","path","BLUE_ICON_PATH","GREY_ICON_PATH","singleComment","multiComment","stripWithoutWhitespace","stripWithWhitespace","str","start","end","slice","stripJsonComments","opts","strip","whitespace","insideString","insideComment","offset","ret","currentChar","nextChar","escaped","substr","JSONC2JSON","jsonc","WHITESPACE","TRIM_JSON","$0","$1","$2","JSON_Parse","cb","JSON","parse","props","storageFn","sync","local","keyOrObj","callback","args","obj","checkAndSyncHistorialSyncStorageDataToLocal","historyStorageKeyOrObj","JSONC_CONFIG","TAB_LIST","id","active","migaratedFlag","SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL","migarated","hisData","stash","tab","log","getConfig","editingConfigKey","Promise","resolve","process","getActiveKeys","setActiveKeys","keys","getConfigItems","setConfigItems","items","map","item","getEditingConfigKey","EDITING_CONFIG_KEY","setEditingConfigKey","saveConfig","parsedJSON","getChecked","setChecked","checked","getOptions","setOptions","options","openLink","isInner","tabs","create","extension","getURL","removeUnusedItems","RULE","LANGUAGE_JSON","CHANGE","DOM_CONTENT_LOADED","SWITCH_DOM_ID","SWITCH_INNER_DOM_ID","SWITCH_AREA_DOM_ID","NEW_TAB_DOM_ID","OPEN_README_DOM_ID","CONTAINER_DOM_ID","STATUS_DOM_ID","CLEAR_CACHE_ENABLED_DOM_ID","CORS_ENABLED_DOM_ID","SWITCH_CHECKED_CLASSNAME","POPUP_HTML_PATH","PREFIX","MONACO_VS_PATH","MONACO_CONTRIBUTION_PATH","HELP_URL","DEFAULT_FONT_FAMILY","PLATFORM_MAC","OPTIONS_SAVED","KEY_DOWN","CLICK","ANYTHING","FORMAT_DOCUMENT_CMD","KEY_CODE_S","SHOW_FOLDING_CONTROLS","OPACITY_VISIBLE","RULE_COMPLETION","DEFAULT_DATA","DEFAULT_DUP_DATA"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA,iH;;;;;;;ACPA,uBAAuB,mBAAO,CAAC,kFAAuB;AACtD;AACA;AACA;AACA,kH;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA,+G;;;;;;;ACLA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,4G;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,+G;;;;;;;ACbA;AACA;AACA;AACA,gH;;;;;;;ACHA;AACA;AACA;AACA,kH;;;;;;;ACHA,wBAAwB,mBAAO,CAAC,mFAAwB;AACxD,sBAAsB,mBAAO,CAAC,iFAAsB;AACpD,iCAAiC,mBAAO,CAAC,4FAAiC;AAC1E,wBAAwB,mBAAO,CAAC,mFAAwB;AACxD;AACA;AACA;AACA,kH;;;;;;;ACPA,uBAAuB,mBAAO,CAAC,kFAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEqB;AACsB;AAO3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","file":"background.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/background.ts\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import {\n  CORS,\n  DEFAULT_CORS_CREDENTIALS,\n  DEFAULT_CORS_METHODS,\n  DEFAULT_CORS_ORIGIN,\n  ORIGIN,\n  REG,\n  EMPTY_STRING,\n  DEFAULT_CREDENTIALS_RESPONSE_HEADERS,\n  NULL_STRING,\n  ACCESS_CONTROL_REQUEST_HEADERS,\n} from './constants';\nimport { Enabled, UrlType } from './enums';\n\ninterface IFowardConfig {\n  proxy?: string[][];\n  cors?: string[];\n}\n\n/**\n * get url type\n * @param url urls\n * @param reg rule\n */\nconst matchUrl = (url: string, reg: string): string | boolean => {\n  if (REG.FORWARD.test(reg)) {\n    // support ??\n    const r = new RegExp(reg.replace('??', '\\\\?\\\\?'), 'i');\n    const matched = r.test(url);\n    if (matched) {\n      return UrlType.REG;\n    }\n  } else {\n    const matched = url.indexOf(reg) > -1;\n    if (matched) {\n      return UrlType.STRING;\n    }\n  }\n  return false;\n};\n\nclass Forward {\n  private _lastRequestId: string | null = null;\n  private _disabled: Enabled = Enabled.YES;\n  private _config: IFowardConfig = {};\n  private _originRequest: Map<string, string> = new Map();\n  private _originRequestHeaders: Map<string, string> = new Map();\n  private _urls: string[] = new Array(200); // for cache\n\n  get urls(): string[] {\n    return this._urls;\n  }\n\n  get disabled(): Enabled {\n    return this._disabled;\n  }\n\n  set disabled(newValue: Enabled) {\n    this._disabled = newValue;\n  }\n  get config(): IFowardConfig {\n    return this._config;\n  }\n  set config(newValue: IFowardConfig) {\n    this._config = { ...newValue };\n  }\n\n  // Breaking the CORS Limitation\n  onHeadersReceivedCallback(\n    details: chrome.webRequest.WebResponseHeadersDetails,\n    cors: boolean = true\n  ): chrome.webRequest.BlockingResponse {\n    // has cors rules\n    const corsMap: string[] = this.config.cors!;\n    let corsMatched: boolean = false;\n\n    if (corsMap && corsMap.length) {\n      corsMap.forEach((rule) => {\n        if (matchUrl(details.url, rule)) {\n          corsMatched = true;\n        }\n      });\n    }\n\n    const disabled: boolean =\n      this.disabled === Enabled.NO || !cors || !corsMatched;\n\n    if (disabled) {\n      return {};\n    }\n\n    const originUrl: string = details.url;\n    let resHeaders: chrome.webRequest.HttpHeader[] = [];\n    let CORSOrigin: string =\n      (this._originRequest.get(details.requestId)\n        ? this._originRequest.get(details.requestId)\n        : details.initiator) || DEFAULT_CORS_ORIGIN;\n\n    if (details.responseHeaders && details.responseHeaders.filter) {\n      let hasCredentials: boolean | string = false;\n      let tempOrigin: string = EMPTY_STRING;\n      resHeaders = details.responseHeaders.filter((responseHeader) => {\n        // Already has access-control-allow-origin headers\n        if (CORS.ORIGIN === responseHeader.name.toLowerCase()) {\n          tempOrigin = responseHeader.value!;\n        }\n\n        if (CORS.CREDENTIALS === responseHeader.name.toLowerCase()) {\n          hasCredentials = responseHeader.value!;\n        }\n\n        if (\n          [CORS.ORIGIN, CORS.CREDENTIALS, CORS.METHODS, CORS.HEADERS].indexOf(\n            responseHeader.name.toLowerCase()\n          ) < 0\n        ) {\n          return true;\n        }\n        return false;\n      });\n\n      // only when hasCredentials\n      if (hasCredentials) {\n        CORSOrigin = tempOrigin;\n      }\n    }\n\n    // suck point\n    if (\n      CORSOrigin === DEFAULT_CORS_ORIGIN &&\n      this._originRequest.get(details.requestId) === NULL_STRING\n    ) {\n      CORSOrigin = DEFAULT_CORS_ORIGIN;\n    }\n\n    resHeaders.push({\n      name: CORS.ORIGIN,\n      value: CORSOrigin,\n    });\n    resHeaders.push({\n      name: CORS.CREDENTIALS,\n      value: DEFAULT_CORS_CREDENTIALS,\n    });\n    resHeaders.push({\n      name: CORS.METHODS,\n      value: DEFAULT_CORS_METHODS,\n    });\n\n    let CORSHeader: string = EMPTY_STRING;\n\n    if (this._originRequestHeaders.get(details.requestId)) {\n      CORSHeader = ',' + this._originRequestHeaders.get(details.requestId);\n    }\n\n    resHeaders.push({\n      name: CORS.HEADERS,\n      value: DEFAULT_CREDENTIALS_RESPONSE_HEADERS + CORSHeader,\n    });\n\n    return {\n      responseHeaders: resHeaders,\n    };\n  }\n\n  redirectToMatchingRule(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    const rules = this.config.proxy;\n    let redirectUrl: string = details.url;\n\n    // in case of chrome-extension downtime\n    if (!rules || !rules.length || REG.CHROME_EXTENSION.test(redirectUrl)) {\n      return {};\n    }\n\n    if (\n      /http(s?):\\/\\/.*\\.(js|css|json|jsonp)/.test(redirectUrl) &&\n      this._urls.indexOf(redirectUrl) < 0\n    ) {\n      this._urls.shift();\n      this._urls.push(redirectUrl);\n    }\n\n    try {\n      for (let i: number = 0; i < rules.length; i++) {\n        const rule = rules[i];\n        if (rule && rule[0] && typeof rule[1] === 'string') {\n          const reg = rule[0];\n          const matched = matchUrl(redirectUrl, reg);\n\n          if (details.requestId !== this._lastRequestId) {\n            if (matched === UrlType.REG) {\n              const r = new RegExp(reg.replace('??', '\\\\?\\\\?'), 'i');\n              redirectUrl = redirectUrl.replace(r, rule[1]);\n            } else if (matched === UrlType.STRING) {\n              redirectUrl = redirectUrl.split(rule[0]).join(rule[1]);\n            }\n          }\n        }\n      }\n    } catch (e) {\n      console.error('rule match error', e);\n    }\n\n    this._lastRequestId = details.requestId;\n    return redirectUrl === details.url ? {} : { redirectUrl };\n  }\n\n  onBeforeSendHeadersCallback(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    const headers: string[] = [];\n    for (let i: number = 0; i < details.requestHeaders!.length; ++i) {\n      const requestName = details.requestHeaders![i].name.toLowerCase();\n      if (requestName === ORIGIN) {\n        this._originRequest.set(\n          details.requestId,\n          details.requestHeaders![i].value!\n        );\n      } else if (requestName === ACCESS_CONTROL_REQUEST_HEADERS || REG.X_HEADER.test(requestName)) {\n        headers.push(requestName);\n      }\n    }\n    if (headers.length) {\n      this._originRequestHeaders.set(details.requestId, headers.join(','));\n    }\n    return { requestHeaders: details.requestHeaders };\n  }\n\n  onBeforeRequestCallback(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    return this.redirectToMatchingRule(details);\n  }\n}\n\nif (!window._forward) {\n  window._forward = new Forward();\n}\n\nexport default window._forward;\n","import {\n  ALL_URLS,\n  BLOCKING,\n  EMPTY_STRING,\n  MILLISECONDS_PER_WEEK,\n  REQUEST_HEADERS,\n  RESPONSE_HEADERS,\n  JSON_CONFIG,\n  DISABLED,\n  CLEAR_CACHE_ENABLED,\n  CORS_ENABLED_STORAGE_KEY,\n  PROXY_STORAGE_KEY,\n  CORS_STORAGE,\n  ACTIVE_KEYS,\n  USE_CHROME_STORAGE_SYNC_FN,\n  GREY_ICON_PATH,\n  BLUE_ICON_PATH,\n  DARK_MODE_MEDIA,\n} from './constants';\nimport {\n  BadgeText,\n  Enabled,\n  IconBackgroundColor,\n} from './enums';\nimport forward from './forward';\nimport { ChromeStorageManager } from './chrome-storage';\n\nconst csmInstance = new ChromeStorageManager({\n  useChromeStorageSyncFn: USE_CHROME_STORAGE_SYNC_FN,\n});\n\nlet clearRunning: boolean = false;\nlet clearCacheEnabled: boolean = true;\nlet corsEnabled: boolean = true;\nlet parseError: boolean = false;\nlet jsonActiveKeys = ['0'];\nlet conf: StorageJSON = {\n  0: {\n    [PROXY_STORAGE_KEY]: [],\n    [CORS_STORAGE]: [],\n  },\n};\n\ninterface SingleConfig {\n  [PROXY_STORAGE_KEY]: Array<[]>;\n  [CORS_STORAGE]: string[];\n}\n\ninterface StorageJSON {\n  0: SingleConfig;\n  [key: string]: any;\n}\n\ncsmInstance.get({\n  [JSON_CONFIG]: {\n    0: {\n      [PROXY_STORAGE_KEY]: [],\n      [CORS_STORAGE]: [],\n    },\n  },\n  [ACTIVE_KEYS]: ['0'],\n}, (result: any) => {\n  jsonActiveKeys = result[ACTIVE_KEYS];\n  if (result && result[JSON_CONFIG]) {\n    conf = result[JSON_CONFIG];\n    const config = getActiveConfig(conf);\n    forward[JSON_CONFIG] = { ...config };\n  } else {\n    forward[JSON_CONFIG] = {\n      [PROXY_STORAGE_KEY]: [],\n      [CORS_STORAGE]: [],\n    };\n    parseError = false;\n  }\n});\n\nfunction getActiveConfig(config: StorageJSON): object {\n  const activeKeys = [...jsonActiveKeys];\n  const json = config['0'];\n  activeKeys.forEach((key: string) => {\n    if (config[key] && key !== '0') {\n      if (config[key][PROXY_STORAGE_KEY]) {\n        if (!json[PROXY_STORAGE_KEY]) {\n          json[PROXY_STORAGE_KEY] = [];\n        }\n        json[PROXY_STORAGE_KEY] = [...json[PROXY_STORAGE_KEY], ...config[key][PROXY_STORAGE_KEY]];\n      }\n\n      if (config[key][CORS_STORAGE]) {\n        if (!json[CORS_STORAGE]) {\n          json[CORS_STORAGE] = [];\n        }\n        json[CORS_STORAGE] = [...json[CORS_STORAGE], ...config[key][CORS_STORAGE]];\n      }\n    }\n  });\n  return json;\n}\n\ncsmInstance.get(\n  {\n    [DISABLED]: Enabled.YES,\n    [CLEAR_CACHE_ENABLED]: Enabled.YES,\n    [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n  },\n  (result: any) => {\n    forward[DISABLED] = result[DISABLED];\n    clearCacheEnabled = result[CLEAR_CACHE_ENABLED] === Enabled.YES;\n    corsEnabled = result[CORS_ENABLED_STORAGE_KEY] === Enabled.YES;\n    setIcon();\n  }\n);\n\n\nchrome.storage.onChanged.addListener((changes) => {\n\n  if (changes[ACTIVE_KEYS]) {\n    jsonActiveKeys = changes[ACTIVE_KEYS].newValue;\n  }\n\n  if (changes[JSON_CONFIG]) {\n    const config = getActiveConfig(changes[JSON_CONFIG].newValue);\n    forward[JSON_CONFIG] = { ...config };\n  }\n\n  if (changes[DISABLED]) {\n    forward[DISABLED] = changes[DISABLED].newValue;\n  }\n\n  if (changes[CLEAR_CACHE_ENABLED]) {\n    clearCacheEnabled = changes[CLEAR_CACHE_ENABLED].newValue === Enabled.YES;\n  }\n\n  if (changes[CORS_ENABLED_STORAGE_KEY]) {\n    corsEnabled = changes[CORS_ENABLED_STORAGE_KEY].newValue === Enabled.YES;\n  }\n\n  csmInstance.get({\n    [JSON_CONFIG]: {\n      0: {\n        [PROXY_STORAGE_KEY]: [],\n        [CORS_STORAGE]: [],\n      },\n    },\n  }, (result: any) => {\n    if (result && result[JSON_CONFIG]) {\n      conf = result[JSON_CONFIG];\n      const config = getActiveConfig(conf);\n      forward[JSON_CONFIG] = { ...config };\n    }\n    setIcon();\n  });\n\n  checkAndChangeIcons()\n});\n\nchrome.webRequest.onBeforeRequest.addListener(\n  (details) => {\n    if (forward[DISABLED] !== Enabled.NO) {\n      if (clearCacheEnabled) {\n        clearCache();\n      }\n\n      return forward.onBeforeRequestCallback(details);\n    }\n    return {};\n  },\n  {\n    urls: [ALL_URLS],\n  },\n  [BLOCKING]\n);\n\n// Breaking the CORS Limitation\nchrome.webRequest.onHeadersReceived.addListener(\n  headersReceivedListener,\n  {\n    urls: [ALL_URLS],\n  },\n  [BLOCKING, RESPONSE_HEADERS]\n);\n\nchrome.webRequest.onBeforeSendHeaders.addListener(\n  (details) => forward.onBeforeSendHeadersCallback(details),\n  { urls: [ALL_URLS] },\n  [BLOCKING, REQUEST_HEADERS]\n);\n\nfunction setBadgeAndBackgroundColor(\n  text: string | number,\n  color: string\n): void {\n  const { browserAction } = chrome;\n  browserAction.setBadgeText({\n    text: EMPTY_STRING + text,\n  });\n  browserAction.setBadgeBackgroundColor({\n    color,\n  });\n}\n\nfunction setIcon(): void {\n  if (parseError) {\n    setBadgeAndBackgroundColor(BadgeText.ERROR, IconBackgroundColor.ERROR);\n    return;\n  }\n\n  if (forward[DISABLED] !== Enabled.NO) {\n    setBadgeAndBackgroundColor(\n      forward[JSON_CONFIG][PROXY_STORAGE_KEY].length,\n      IconBackgroundColor.ON\n    );\n  } else {\n    setBadgeAndBackgroundColor(BadgeText.OFF, IconBackgroundColor.OFF);\n    return;\n  }\n}\n\nfunction headersReceivedListener(\n  details: chrome.webRequest.WebResponseHeadersDetails): chrome.webRequest.BlockingResponse {\n  return forward.onHeadersReceivedCallback(details, corsEnabled);\n}\n\nfunction clearCache(): void {\n  if (!clearRunning) {\n    clearRunning = true;\n    const millisecondsPerWeek = MILLISECONDS_PER_WEEK;\n    const oneWeekAgo = new Date().getTime() - millisecondsPerWeek;\n    chrome.browsingData.removeCache(\n      {\n        since: oneWeekAgo,\n      },\n      () => {\n        clearRunning = false;\n      }\n    );\n  }\n}\n\nfunction checkAndChangeIcons() {\n  const isDarkMode = window.matchMedia(DARK_MODE_MEDIA);\n  if (isDarkMode && isDarkMode.matches) {\n    chrome.browserAction.setIcon({ path: BLUE_ICON_PATH });\n  } else {\n    chrome.browserAction.setIcon({ path: GREY_ICON_PATH });\n  }\n}\n\n// check when extension is loaded\ncheckAndChangeIcons();","import { EMPTY_STRING } from './constants';\n\n// https://github.com/sindresorhus/strip-json-comments\nconst singleComment = 1;\nconst multiComment = 2;\nconst stripWithoutWhitespace = (): string => EMPTY_STRING;\nconst stripWithWhitespace = (str: string, start: number, end: number): string =>\n  str.slice(start, end).replace(/\\S/g, ' ');\n\ninterface IStripOptions {\n  whitespace?: boolean;\n}\n\nexport function stripJsonComments(str: string, opts?: IStripOptions): string {\n  opts = opts || {};\n\n  const strip =\n    opts.whitespace === false ? stripWithoutWhitespace : stripWithWhitespace;\n\n  let insideString: boolean = false;\n  let insideComment: number | boolean = false;\n  let offset: number = 0;\n  let ret: string = EMPTY_STRING;\n\n  for (let i: number = 0; i < str.length; i++) {\n    const currentChar = str[i];\n    const nextChar = str[i + 1];\n\n    if (!insideComment && currentChar === '\"') {\n      const escaped = str[i - 1] === '\\\\' && str[i - 2] !== '\\\\';\n      if (!escaped) {\n        insideString = !insideString;\n      }\n    }\n\n    if (insideString) {\n      continue;\n    }\n\n    if (!insideComment && currentChar + nextChar === '//') {\n      ret += str.slice(offset, i);\n      offset = i;\n      insideComment = singleComment;\n      i++;\n    } else if (\n      insideComment === singleComment &&\n      currentChar + nextChar === '\\r\\n'\n    ) {\n      i++;\n      insideComment = false;\n      ret += strip(str, offset, i);\n      offset = i;\n      continue;\n    } else if (insideComment === singleComment && currentChar === '\\n') {\n      insideComment = false;\n      ret += strip(str, offset, i);\n      offset = i;\n    } else if (!insideComment && currentChar + nextChar === '/*') {\n      ret += str.slice(offset, i);\n      offset = i;\n      insideComment = multiComment;\n      i++;\n      continue;\n    } else if (\n      insideComment === multiComment &&\n      currentChar + nextChar === '*/'\n    ) {\n      i++;\n      insideComment = false;\n      ret += strip(str, offset, i + 1);\n      offset = i + 1;\n      continue;\n    }\n  }\n\n  return (\n    ret + (insideComment ? strip(str.substr(offset), 0, 0) : str.substr(offset))\n  );\n}\n","import { stripJsonComments } from './strip-json-comments';\nimport { REG, EMPTY_STRING } from './constants';\n\nexport function JSONC2JSON(jsonc: string): string {\n  return stripJsonComments(jsonc)\n    .replace(REG.WHITESPACE, EMPTY_STRING)\n    .replace(REG.TRIM_JSON, ($0, $1, $2) => $2);\n}\n\nexport function JSON_Parse(json: string, cb: (error: object | boolean, json?: object) => void): void {\n  try {\n    cb(false, JSON.parse(json));\n  } catch (e) {\n    cb(e);\n  }\n}\n","import {\n  JSONC_CONFIG,\n  JSON_CONFIG,\n  DISABLED,\n  CLEAR_CACHE_ENABLED,\n  CORS_ENABLED_STORAGE_KEY,\n  TAB_LIST,\n  EDITING_CONFIG_KEY,\n  ACTIVE_KEYS,\n  USE_CHROME_STORAGE_SYNC_FN,\n  SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL,\n} from './constants';\nimport { JSONC2JSON, JSON_Parse } from './utils';\nimport { Enabled } from './enums';\n\ninterface ConfigStorage {\n  [JSONC_CONFIG]: object;\n}\ninterface OptionsStorage {\n  [CLEAR_CACHE_ENABLED]: string;\n  [CORS_ENABLED_STORAGE_KEY]: string;\n}\n\ninterface ChromeStorageManagerProps {\n  useChromeStorageSyncFn: boolean;\n}\nexport class ChromeStorageManager {\n  private storageFn: any;\n  \n  constructor(props: ChromeStorageManagerProps) {\n    /** \n    **  More details: https://developer.chrome.com/extensions/storage\n    **\n    **  Property limit between storage.sync and storage.local in QUOTA_BYTES: \n    **  QUOTA_BYTES_PER_ITEM prop in storage.sync is 8,192 and\n    **  QUOTA_BYTES prop in storage.sync is 102,400,\n    **  which indicates the maximum total amount (in bytes) of data that can be stored in sync storage.sync.\n    **  Updates that would cause this limit to be exceeded fail immediately and set runtime.lastError.  \n    **\n    **  QUOTA_BYTES prop in storage.local is 5,242,880, \n    **  which indicates the maximum amount (in bytes) of data that can be stored in local storage, \n    **  as measured by the JSON stringification of every value plus every key's length.\n    */\n    this.storageFn = props.useChromeStorageSyncFn ? window.chrome.storage.sync : window.chrome.storage.local;\n  }\n\n  get(keyOrObj: any, callback: Function = (args: any): any => {}) {\n    this.storageFn.get(keyOrObj, callback);\n  }\n\n  set(obj: any, callback: Function = (args: any): any => {}) {\n    this.storageFn.set(obj, callback);\n  }\n}\n\nconst csmInstance = new ChromeStorageManager({\n  useChromeStorageSyncFn: USE_CHROME_STORAGE_SYNC_FN, // we can also make this option configurable\n});\n\n/**\n * 兼容chrome.storage.sync 历史数据的逻辑\n */\nfunction checkAndSyncHistorialSyncStorageDataToLocal() {\n  const historyStorageKeyOrObj = {\n    [JSONC_CONFIG]: {\n      0: '',\n    },\n    [JSON_CONFIG]: {},\n    [TAB_LIST]: [{\n      id: '0',\n      name: 'Current',\n      active: true,\n    }],\n    [ACTIVE_KEYS]: ['0'],\n  };\n  const migaratedFlag = {\n    [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n      migarated: false,\n    },\n  };\n\n  // Code below is only for migaration testing\n  // \n  // csmInstance.set({\n  //   [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n  //     migarated: false,\n  //   },\n  // });\n\n  csmInstance.get(migaratedFlag, (result: any) => {\n    if (!result[SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL].migarated) {\n      chrome.storage.sync.get(historyStorageKeyOrObj, (hisData: any) => {\n        const stash: any = {\n          [JSONC_CONFIG]: {},\n          [JSON_CONFIG]: {},\n        };\n        hisData[TAB_LIST].forEach((tab: any)=>{\n          stash[JSONC_CONFIG][tab.id] = hisData[JSONC_CONFIG][tab.id];\n          stash[JSON_CONFIG][tab.id] = hisData[JSON_CONFIG][tab.id];\n        })\n\n        csmInstance.set({\n          [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n            migarated: true,\n          },\n          ...hisData,\n          ...stash,\n        });\n      })\n    } else {\n      console.log('SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL');\n    }\n  })\n}\n\ncheckAndSyncHistorialSyncStorageDataToLocal();\n\n\nexport function getConfig(editingConfigKey: string): Promise<ConfigStorage> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [JSONC_CONFIG]: {\n          0: '',\n        },\n      });\n    }\n    csmInstance.get({\n      [JSONC_CONFIG]: {\n        0: '',\n      },\n    }, (result: any) => {\n      if (typeof result[JSONC_CONFIG] === 'string') {\n        return resolve(result[JSONC_CONFIG]);\n      }\n      resolve(result[JSONC_CONFIG][editingConfigKey]);\n    });\n  });\n}\n\nexport function getActiveKeys(): Promise<any> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [ACTIVE_KEYS]: ['0'],\n      });\n    }\n    csmInstance.get(\n      {\n        [ACTIVE_KEYS]: ['0'],\n      }, (result: any) => {\n        resolve(result[ACTIVE_KEYS]);\n      });\n  });\n}\n\nexport function setActiveKeys(keys?: string[]): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [ACTIVE_KEYS]: keys,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getConfigItems(): Promise<any> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [TAB_LIST]: [{\n          id: '0',\n          name: 'Current',\n          active: true,\n        }],\n      });\n    }\n    csmInstance.get(\n      {\n        [TAB_LIST]: [{\n          id: '0',\n          name: 'Current',\n          active: true,\n        }],\n      }, (result: any) => {\n        resolve(result[TAB_LIST]);\n      });\n  });\n}\n\nexport function setConfigItems(items?: any): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [TAB_LIST]: items.slice(),\n          [ACTIVE_KEYS]: items.map((item: any) => {\n            if (item.active) {\n              return item.id;\n            }\n          }),\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getEditingConfigKey(): Promise<string> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve('0');\n    }\n    csmInstance.get(\n      {\n        [EDITING_CONFIG_KEY]: '0',\n      }, (result: any) => {\n        resolve(result[EDITING_CONFIG_KEY]);\n      });\n  });\n}\n\nexport function setEditingConfigKey(key: string): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [EDITING_CONFIG_KEY]: key,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function saveConfig(jsonc: string, editingConfigKey: string): Promise<any> | void {\n  const json = JSONC2JSON(jsonc);\n\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.get({\n        [JSONC_CONFIG]: {},\n        [JSON_CONFIG]: {},\n      }, (result: any) => {\n        // migrate\n        if (typeof result[JSONC_CONFIG] === 'string') {\n          result[JSONC_CONFIG] = {};\n          result[JSON_CONFIG] = {};\n        }\n\n        result[JSONC_CONFIG][editingConfigKey] = jsonc;\n\n        JSON_Parse(json, (error, parsedJSON) => {\n          if (!error) {\n            result[JSON_CONFIG][editingConfigKey] = parsedJSON;\n            return;\n          }\n          result[JSON_CONFIG][editingConfigKey] = '';\n        });\n\n        csmInstance.set(\n          result,\n          resolve\n        );\n      });\n    });\n  }\n}\n\nexport function getChecked(): Promise<string> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve(Enabled.YES);\n    }\n    csmInstance.get(DISABLED, (result: any) => {\n      resolve(result[DISABLED]);\n    });\n  });\n}\n\nexport function setChecked(checked?: boolean): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [DISABLED]: checked ? Enabled.YES : Enabled.NO,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getOptions(): Promise<OptionsStorage> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [CLEAR_CACHE_ENABLED]: Enabled.YES,\n        [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n      });\n    }\n    csmInstance.get(\n      {\n        [CLEAR_CACHE_ENABLED]: Enabled.YES,\n        [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n      },\n      (result: any) => {\n        resolve({\n          [CLEAR_CACHE_ENABLED]: result.clearCacheEnabled,\n          [CORS_ENABLED_STORAGE_KEY]: result.corsEnabled,\n        });\n      }\n    );\n  });\n}\n\nexport function setOptions(options: any): Promise<OptionsStorage> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          clearCacheEnabled: options.clearCacheEnabled\n            ? Enabled.YES\n            : Enabled.NO,\n          corsEnabled: options.corsEnabled ? Enabled.YES : Enabled.NO,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function openLink(url: string, isInner: boolean = false): void {\n  chrome.tabs.create(\n    { url: isInner ? chrome.extension.getURL(url) : url },\n    (tab) => {\n      // Tab opened.\n    }\n  );\n}\n\n\n\nexport function removeUnusedItems(){\n  csmInstance.get({\n    [JSONC_CONFIG]: {},\n    [JSON_CONFIG]: {},\n    [TAB_LIST]: [{\n      id: '0',\n      name: 'Current',\n      active: true,\n    }],\n  }, (result: any) => {\n    let stash: any = {\n      [JSONC_CONFIG]: {},\n      [JSON_CONFIG]: {},\n    };\n    result[TAB_LIST].forEach((tab: any)=>{\n      stash[JSONC_CONFIG][tab.id] = result[JSONC_CONFIG][tab.id];\n      stash[JSON_CONFIG][tab.id] = result[JSON_CONFIG][tab.id];\n    })\n    csmInstance.set(\n      stash,\n      ()=>{}\n    );\n  });\n}\n","export const REG = {\n  TRIM_JSON: /(,+)([^a-z0-9[\"])/gi,\n  CHROME_EXTENSION: /^chrome-extension:\\/\\//i,\n  // support [ ] ( ) \\ * ^ $\n  FORWARD: /\\\\|\\[|]|\\(|\\)|\\*|\\$|\\^/i,\n  WHITESPACE: /\\s+/g,\n  X_HEADER: /^x-/,\n};\n\nexport const ALL_URLS = '<all_urls>';\nexport const BLOCKING = 'blocking';\nexport const REQUEST_HEADERS = 'requestHeaders';\nexport const RESPONSE_HEADERS = 'responseHeaders';\nexport const DEFAULT_CREDENTIALS_RESPONSE_HEADERS =\n  'Content-Type, access-control-allow-headers, Authorization, X-Requested-With, X-Referer';\nexport const CORS = {\n  METHODS: 'access-control-allow-methods',\n  CREDENTIALS: 'access-control-allow-credentials',\n  ORIGIN: 'access-control-allow-origin',\n  HEADERS: 'access-control-allow-headers',\n};\nexport const ACCESS_CONTROL_REQUEST_HEADERS = 'access-control-request-headers';\nexport const DEFAULT_CORS_ORIGIN = '*';\nexport const DEFAULT_CORS_METHODS = '*';\nexport const DEFAULT_CORS_CREDENTIALS = 'true';\nexport const ORIGIN = 'origin';\n/**\n * Disabled storage key\n */\nexport const DISABLED = 'disabled';\n/**\n * pure JSON storage key\n */\nexport const JSON_CONFIG = 'config';\n/**\n * JSON with comments storage key\n */\nexport const JSONC_CONFIG = 'config_for_shown';\n\nexport const EDITING_CONFIG_KEY = 'config_editing_key';\nexport const TAB_LIST = 'tab_list';\nexport const ACTIVE_KEYS = 'active_keys';\nexport const CLEAR_CACHE_ENABLED = 'clearCacheEnabled';\nexport const CORS_STORAGE = 'cors';\nexport const CORS_ENABLED_STORAGE_KEY = 'corsEnabled';\nexport const PROXY_STORAGE_KEY = 'proxy';\nexport const MILLISECONDS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;\nexport const RULE = 'rule';\nexport const LANGUAGE_JSON = 'json';\nexport const CHANGE = 'change';\nexport const DOM_CONTENT_LOADED = 'DOMContentLoaded';\nexport const SWITCH_DOM_ID = 'J_Switch';\nexport const SWITCH_INNER_DOM_ID = 'J_SwitchInner';\nexport const SWITCH_AREA_DOM_ID = 'J_SwitchArea';\nexport const NEW_TAB_DOM_ID = 'J_OpenInNewTab';\nexport const OPEN_README_DOM_ID = 'J_OpenReadme';\nexport const CONTAINER_DOM_ID = 'J_Container';\nexport const STATUS_DOM_ID = 'J_Status';\nexport const CLEAR_CACHE_ENABLED_DOM_ID = 'J_ClearCacheEnabled';\nexport const CORS_ENABLED_DOM_ID = 'J_CorsEnabled';\nexport const SWITCH_CHECKED_CLASSNAME = 'ant-switch-checked';\nexport const POPUP_HTML_PATH = 'XSwitch.html';\nexport const PREFIX = process.env.NODE_ENV !== 'production' ? '/build/' : './';\nexport const MONACO_VS_PATH = process.env.NODE_ENV !== 'production'\n  ? '/build/lib/monaco-editor/min/vs'\n  : './lib/monaco-editor/min/vs';\nexport const MONACO_CONTRIBUTION_PATH = 'vs/language/json/monaco.contribution';\nexport const HELP_URL = 'https://yuque.com/jiushen/blog/xswitch-readme';\nexport const DEFAULT_FONT_FAMILY = 'Menlo, Monaco, \"Courier New\", monospace';\nexport const PLATFORM_MAC = 'Mac';\nexport const OPTIONS_SAVED = 'Options saved.';\nexport const EMPTY_STRING = '';\nexport const KEY_DOWN = 'keydown';\nexport const CLICK = 'click';\nexport const ANYTHING = 'anyString';\nexport const FORMAT_DOCUMENT_CMD = 'editor.action.formatDocument';\nexport const KEY_CODE_S = 83;\nexport const SHOW_FOLDING_CONTROLS = 'always';\nexport const OPACITY_VISIBLE = '1';\nexport const NULL_STRING = 'null';\nexport const RULE_COMPLETION = `[\n  \"\\${1:from}\",\n  \"\\${1:to}\",\n],`;\n\nexport const DEFAULT_DATA = `{\n  // Use IntelliSense to learn about possible links.\n  // Type \\`rule\\` to quick insert rule.\n  // 输入 rule 来快速插入规则\n  // For more information, visit: https://github.com/yize/xswitch\n  \"proxy\": [\n    [\n      \"https://unpkg.com/react@16.4.1/umd/react.production.min.js\",\n      \"https://unpkg.com/react@16.4.1/umd/react.development.js\"\n    ],\n    // \\`Command/Ctrl + click\\` to visit:\n    // https://unpkg.com/react@16.4.1/umd/react.production.min.js\n    // [\n      // \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      // \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    // ],\n  ],\n  // urls that want CORS\n  // \"cors\": [\n    // \"mocks.a.com\",\n    // \"mocks.b.com\"\n  // ]\n}\n`;\n\nexport const DEFAULT_DUP_DATA = `{\n  \"proxy\": [\n    [\n      \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    ],\n  ],\n}\n`;\n\n// false: 使用chrome.storage.sync.get/set\n// true:  使用chrome.storage.local.get/set\nexport const USE_CHROME_STORAGE_SYNC_FN = false;\n\n/**\n * check if old config rules saving by chrome.storage.sync.set function have been migarated\n */\nexport const SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL = 'sync_storage_data_has_been_migarated_to_local';\n\nexport const BLUE_ICON_PATH = 'images/blue_128.png';\nexport const GREY_ICON_PATH = 'images/grey_128.png';\nexport const DARK_MODE_MEDIA = '(prefers-color-scheme: dark)';\n","export enum UrlType {\n  REG = 'reg',\n  STRING = 'string',\n}\n\nexport enum Enabled {\n  YES = 'enabled',\n  NO = 'disabled',\n}\n\nexport enum IconBackgroundColor {\n  ON = '#1890ff',\n  OFF = '#bfbfbf',\n  ERROR = '#f5222d',\n}\n\nexport enum BadgeText {\n  ERROR = 'Error',\n  OFF = 'OFF',\n  ON = 'ON',\n}\n"],"sourceRoot":""}